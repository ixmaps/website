<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>TrWorkItem Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>TrWorkItem Class Reference</h1><!-- doxytag: class="TrWorkItem" --><code>#include &lt;<a class="el" href="TrWorkItem_8h-source.html">TrWorkItem.h</a>&gt;</code>
<p>

<p>
<a href="classTrWorkItem-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#4316e5497fae321cd211ac3cafd60b4d">TrWorkItem</a> (const QString &amp;host, <a class="el" href="classTrStatus.html">TrStatus</a> *<a class="el" href="classTrWorkItem.html#4270cd5b74c069865aff5881900ff307">tstat</a>, int <a class="el" href="classTrWorkItem.html#efbff2fd78cb5e3abda6bcc51a70a072">nprobes</a>=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#e95da0459466fe9c4cd30384e75dfc1c">isResolved</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">whether hostname to IP# resolution worked  <a href="#e95da0459466fe9c4cd30384e75dfc1c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#9410f63d30b40f24b452243f1f5f0a48">parseCanonical</a> (QByteArray &amp;trData)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#5e3ff6cc58c4411661b93e4280613b43">formatForServer</a> (QByteArray &amp;ba, int private_ip_cnt, const QString &amp;programVersion)</td></tr>

<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="efbff2fd78cb5e3abda6bcc51a70a072"></a><!-- doxytag: member="TrWorkItem::nprobes" ref="efbff2fd78cb5e3abda6bcc51a70a072" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#efbff2fd78cb5e3abda6bcc51a70a072">nprobes</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of probes per hop along the traceroute <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">QVector&lt; QHostAddress &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#bec5a48d1d5cf74bb01453ab708e4aeb">host_addrs</a></td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3beaba00037ffa9044bca8b2f0a555eb"></a><!-- doxytag: member="TrWorkItem::ip_addrs" ref="3beaba00037ffa9044bca8b2f0a555eb" args="" -->
QVector&lt; QString &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#3beaba00037ffa9044bca8b2f0a555eb">ip_addrs</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">one IP address for each hop as a dotted-quad or '*' if unknown <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ce2535ad8bbfedc141dc22926c496dfa"></a><!-- doxytag: member="TrWorkItem::rtts" ref="ce2535ad8bbfedc141dc22926c496dfa" args="" -->
QVector&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#ce2535ad8bbfedc141dc22926c496dfa">rtts</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flattened 2-dimensional array of Round Trip Times in microseconds <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="661a2813b20b2b65ddc5de5b155e1b49"></a><!-- doxytag: member="TrWorkItem::trHost" ref="661a2813b20b2b65ddc5de5b155e1b49" args="" -->
QString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#661a2813b20b2b65ddc5de5b155e1b49">trHost</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host being trace-routed to as supplied by user/batch file <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="80fa4a969af4cfcba111a0b8e7fc484b"></a><!-- doxytag: member="TrWorkItem::trHostAddress" ref="80fa4a969af4cfcba111a0b8e7fc484b" args="" -->
QHostAddress&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#80fa4a969af4cfcba111a0b8e7fc484b">trHostAddress</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">trHost resolved to an IP address <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4270cd5b74c069865aff5881900ff307"></a><!-- doxytag: member="TrWorkItem::tstat" ref="4270cd5b74c069865aff5881900ff307" args="" -->
<a class="el" href="classTrStatus.html">TrStatus</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#4270cd5b74c069865aff5881900ff307">tstat</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">saved copy of argument to <a class="el" href="classTrWorkItem.html">TrWorkItem</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="06e4ade2f71c43a083bbdbbb24f53590"></a><!-- doxytag: member="TrWorkItem::name_ok" ref="06e4ade2f71c43a083bbdbbb24f53590" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrWorkItem.html#06e4ade2f71c43a083bbdbbb24f53590">name_ok</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">whether host resolved or not. Returned by <a class="el" href="classTrWorkItem.html#e95da0459466fe9c4cd30384e75dfc1c" title="whether hostname to IP# resolution worked">isResolved()</a>. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A work item describing a single traceroute to be done, a container for it's results, and to be submitted to the server. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="4316e5497fae321cd211ac3cafd60b4d"></a><!-- doxytag: member="TrWorkItem::TrWorkItem" ref="4316e5497fae321cd211ac3cafd60b4d" args="(const QString &amp;host, TrStatus *tstat, int nprobes=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TrWorkItem::TrWorkItem           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTrStatus.html">TrStatus</a> *&nbsp;</td>
          <td class="paramname"> <em>tstat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nprobes</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
constructor <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>host</em>&nbsp;</td><td>may be either a hostname or a dotted quad </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tstat</em>&nbsp;</td><td>is a pointer to a <a class="el" href="classTrStatus.html">TrStatus</a> traceroute status object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nprobes</em>&nbsp;</td><td>is the number of probes per hop along the traceroute The hostname is resolved.</td></tr>
  </table>
</dl>
A work item describing a single traceroute to be done, a container for it's results, and to be submitted to the server. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e95da0459466fe9c4cd30384e75dfc1c"></a><!-- doxytag: member="TrWorkItem::isResolved" ref="e95da0459466fe9c4cd30384e75dfc1c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TrWorkItem::isResolved           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
whether hostname to IP# resolution worked 
<p>
The hostname supplied to the ctor. needs to have been resolved as an IPv4 address in order to proceed. Tell if this is the case. 
</div>
</div><p>
<a class="anchor" name="9410f63d30b40f24b452243f1f5f0a48"></a><!-- doxytag: member="TrWorkItem::parseCanonical" ref="9410f63d30b40f24b452243f1f5f0a48" args="(QByteArray &amp;trData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TrWorkItem::parseCanonical           </td>
          <td>(</td>
          <td class="paramtype">QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>trData</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
parse traceroute output <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>trData</em>&nbsp;</td><td>is the output in canonical format from a traceroute doer program </td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>{ document the format } </dd></dl>
Parse the output from the traceroute doer process. This output is in the canonical format as produced by the wmtrcmd or trparse programs, and is a simple table of IPv4 addresses and Round Trip Times in microseconds. 
</div>
</div><p>
<a class="anchor" name="5e3ff6cc58c4411661b93e4280613b43"></a><!-- doxytag: member="TrWorkItem::formatForServer" ref="5e3ff6cc58c4411661b93e4280613b43" args="(QByteArray &amp;ba, int private_ip_cnt, const QString &amp;programVersion)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TrWorkItem::formatForServer           </td>
          <td>(</td>
          <td class="paramtype">QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>ba</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>private_ip_cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>programVersion</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
format a traceroute for submission to the server <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ba</em>&nbsp;</td><td>is an empty caller-supplied buffer for the result </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>private_ip_cnt</em>&nbsp;</td><td>is the number of private (RFC 1918) addresses to leave off the submitted traceroute </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>programVersion</em>&nbsp;</td><td>is the program version </td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>{ move private_ip_cnt out of the caller to reduce degree of coupling } </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>{ document the format } </dd></dl>
Format the traceroute for submission to the server. 
</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="bec5a48d1d5cf74bb01453ab708e4aeb"></a><!-- doxytag: member="TrWorkItem::host_addrs" ref="bec5a48d1d5cf74bb01453ab708e4aeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVector&lt;QHostAddress&gt; <a class="el" href="classTrWorkItem.html#bec5a48d1d5cf74bb01453ab708e4aeb">TrWorkItem::host_addrs</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>{ encapsulate host_addrs with a method to apply privacy to it } </dd></dl>
internal representation of IP addresses for each hop 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="TrWorkItem_8h-source.html">TrWorkItem.h</a><li>TrWorkItem.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Dec 21 21:59:17 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
